!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=2)}([function(t,e,s){t.exports=s.p+"c48f5201c944a7b1dc41000712856b22.png"},function(t,e,s){},function(t,e,s){"use strict";s.r(e);s(1);var i=class{constructor(t){this.fields=t,this.root="#root",this.nodes=[],this.randomIndex=0,this.intervalRandom=null}randomPositionGoblin(t,e){this.intervalRandom=setInterval(()=>{const e=document.querySelectorAll(".js-map-field");return this.randomIndex=Math.floor(Math.random()*e.length),e[this.randomIndex].appendChild(t)},e)}creationFilds(){const t=this.fields*this.fields;for(let e=0;e<t;e++){const t=document.createElement("li");t.className="map__field js-map-field",t.style.cursor="pointer",this.nodes.push(t)}}creationMap(){const t=document.querySelector(this.root),e=document.createElement("ul");e.className="map",e.setAttribute("id","map"),e.style.gridTemplateRows=`repeat(${this.fields}, 75px)`,e.style.gridTemplateColumns=`repeat(${this.fields}, 75px)`,t.append(e),this.creationFilds();const s=document.querySelector("#map");for(const t of this.nodes)s.appendChild(t)}creationStat(t,e){const s=document.querySelector(this.root),i=document.createElement("div"),n=document.querySelector(".js-counter");null!==n&&n.remove(),i.className="counter js-counter",i.innerHTML=`<p>Попадания: ${t}</p><p>Промахи: ${e}</p>`,s.prepend(i)}onClick(t=(()=>{})){this.nodes.forEach((e,s)=>{e.addEventListener("click",e=>t(e,s))})}static messageInfo(t){alert(t)}},n=s(0),o=s.n(n);var a=class{constructor(t,e){this.nameEl=t,this.className=e}nodeImg(){const t=document.createElement(this.nameEl);return t.className=this.className,t.style.cursor="crosshair",t.setAttribute("src",o.a),t}};new class{constructor(t){this.stateHits=0,this.stateMisses=0,this.goblin=new a("img","map__img js-goblin"),this.gamePlay=t,this.eventsLock=!1}init(){this.gamePlay.creationStat(this.stateHits,this.stateMisses),this.gamePlay.creationMap(),this.gamePlay.randomPositionGoblin(this.goblin.nodeImg(),500),this.gamePlay.onClick(this.onClickNode.bind(this))}_addStateHits(t,e){return new Promise(t=>{this.eventsLock=!0,this.stateHits+=1,this.stateHits===e&&(i.messageInfo("you win!!!"),this.stateHits=0,this.stateMisses=0),document.querySelector(".js-goblin").remove(),clearInterval(this.gamePlay.intervalRandom),setTimeout(()=>{this.eventsLock=!1,t()},1e3)})}_addStateMisses(t,e){return new Promise(t=>{this.eventsLock=!0,this.stateMisses+=1,this.stateMisses===e&&(i.messageInfo("Game over!!!"),this.stateHits=0,this.stateMisses=0),document.querySelector(".js-goblin").remove(),clearInterval(this.gamePlay.intervalRandom),setTimeout(()=>{this.eventsLock=!1,t()},1e3)})}onClickNode(t,e){t.preventDefault(),this.eventsLock||(this.gamePlay.randomIndex===e?this._addStateHits(e,5).then(()=>{this.gamePlay.creationStat(this.stateHits,this.stateMisses),this.gamePlay.randomPositionGoblin(this.goblin.nodeImg(),1e3)}):this._addStateMisses(e,5).then(()=>{this.gamePlay.creationStat(this.stateHits,this.stateMisses),this.gamePlay.randomPositionGoblin(this.goblin.nodeImg(),1e3)}))}}(new i(4)).init()}]);